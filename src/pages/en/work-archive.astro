---
import Layout from "../../layouts/Layout.astro";
import Post from "../../components/work-archive/Post";
import Music from "../../components/work-archive/Music";
import { getBlogsEn, getMusicEn } from "../../lib/microcms.js";

let blogPosts = [];
let musicPosts = [];

try {
  const [blogsData, musicData] = await Promise.all([
    getBlogsEn({ limit: 100 }),
    getMusicEn({ limit: 100 })
  ]);
  blogPosts = blogsData.contents || [];
  musicPosts = musicData.contents || [];
} catch (error) {
  console.error('Error fetching English work archive data:', error);
}
---

<Layout title="Dynamis | Works" lang="en">
  
  <!-- main -->
  <main id="work-archive" class="work-archive" role="main">
    <div class="pageheader" data-bg="/assets/images/challenges-bg__img.webp">
      <h1 class="pageheader-ttl">
        <span class="eng">Works</span>
        Portfolio
      </h1>
    </div>
    <nav aria-label="Breadcrumb navigation" class="breadcrumb">
      <div class="container">
        <ol
          itemscope
          itemtype="https://schema.org/BreadcrumbList"
          class="breadcrumb-list"
        >
          <li
            class="breadcrumb-list__item"
            itemprop="itemListElement"
            itemscope
            itemtype="https://schema.org/ListItem"
          >
            <a itemprop="item" href="/en/">
              <span itemprop="name">Home</span>
            </a>
            <meta itemprop="position" content="1" />
          </li>
          <li
            class="breadcrumb-list__item"
            itemprop="itemListElement"
            itemscope
            itemtype="https://schema.org/ListItem"
          >
            <span itemprop="name">Works</span>
            <meta itemprop="position" content="2" />
          </li>
        </ol>
      </div>
    </nav>
    <Post posts={blogPosts} basePath="/en" />
    <Music posts={musicPosts} basePath="/en" />
  </main>
</Layout>